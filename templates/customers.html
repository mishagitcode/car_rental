{% extends "base.html" %}
{% set title = "Customers" %}

{% block content %}
  <section class="panel split">
    <div>
      <h3>Register a customer</h3>
      <p>Store standard registration details for every customer contact.</p>
      <form method="post" class="form-grid">
        <label>
          Last name
          <input name="last_name" required />
        </label>
        <label>
          First name
          <input name="first_name" required />
        </label>
        <label>
          Middle name
          <input name="middle_name" />
        </label>
        <label>
          Address
          <input name="address" required />
        </label>
        <label>
          Phone number
          <input name="phone" required />
        </label>
        <button type="submit">Save customer</button>
      </form>
    </div>
    <div class="tip-card">
      <h4>Loyalty discounts</h4>
      <p>
        Customers with 3+ completed rentals receive a 5% discount. After 5 rentals,
        the discount increases to 10%.
      </p>
    </div>
  </section>

  <section class="panel">
    <div class="panel-header">
      <h3>Customer directory</h3>
      <p>Every customer can request rentals multiple times.</p>
    </div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Full name</th>
            <th>Address</th>
            <th>Phone</th>
          </tr>
        </thead>
        <tbody>
          {% for customer in customers %}
            <tr>
              <td>#{{ customer.id }}</td>
              <td>
                {{ customer.last_name }} {{ customer.first_name }}
                {% if customer.middle_name %}
                  {{ customer.middle_name }}
                {% endif %}
              </td>
              <td>{{ customer.address }}</td>
              <td>{{ customer.phone }}</td>
            </tr>
          {% else %}
            <tr>
              <td colspan="4" class="empty">No customers registered yet.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
{% endblock %}
